<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Sandbox</title>
  <!-- 
  <script 
    src="https://cdn.jsdelivr.net/gh/nitro-codes/cdn-test@main/script.js"
  ></script>
  -->
  <script src="https://cdn.jsdelivr.net/gh/nitro-codes/cdn-test@main/script1.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/nitro-codes/cdn-test@main/script2.js" crossorigin="anonymous"></script>
  <script>
    window.onerror = function (message, url, line, column, error) {
        console.log(message, url, line, column, error);
    };
    window.addEventListener("load", (event) => {
      //console.log("page is fully loaded");
      console.log('script3.run3() - runtime script tag');
      run3();
      
    });
    window.addEventListener("load", (event) => {
      //console.log("page is fully loaded");
      console.log('script4.run4() - runtime script tag - crossorigin=anonymous');
      run4();
    });
    window.addEventListener("load", (event) => {
      //console.log("page is fully loaded");
      console.log('script3.run3() - runtime script tag - trycatch');
      try {
        run3();
      } catch(e) { 
        console.log(e);
        throw new Error(e);
      }
    });

    (function (w,d,n,h,i){
        //w[n]=w[n]||{init:function(){w[n].q=arguments}};
        h=d.getElementsByTagName('head')[0];
        i=h.getElementsByTagName('script')[0];
        r=d.createElement('script');
        r.async=0;
        r.src="https://cdn.jsdelivr.net/gh/nitro-codes/cdn-test@main/script3.js";
        h.insertBefore(r,i);
    })(window, document, 'Script3');
    
    (function (w,d,n,h,i){
        //w[n]=w[n]||{init:function(){w[n].q=arguments}};
        h=d.getElementsByTagName('head')[0];
        i=h.getElementsByTagName('script')[0];
        r=d.createElement('script');
        r.async=0;
        r.src="https://cdn.jsdelivr.net/gh/nitro-codes/cdn-test@main/script4.js";
        r.crossOrigin='anonymous';
        h.insertBefore(r,i);
    })(window, document, 'Script4');
  </script>
  <script async defer>
    console.log('script1.run1() - normal script tag');
    run1();
  </script>
  <script async defer>
    console.log('script2.run2() - normal script tag - crossorigin=anonymous');
    run2();
  </script>
  
  <!-- <script>
    console.log('script1.run1() - normal script tag');
    try {
      run1();
    } catch (e) {
      console.error(e)
    }
    
    console.log('script2.run2() - normal script tag - crossorigin=anonymous');
    try {
      run2();
    } catch (e) {
      console.error(e)
    }
    
    console.log('script3.run3() - runtime script tag');
    try {
      Script3.run3();
    } catch (e) {
      console.error(e)
    }
    
    console.log('script4.run4() - runtime script tag - crossorigin=anonymous');
    try {
      Script4.run4();
    } catch (e) {
      console.error(e)
    }
    
    var originalFunction = run;
    window.Code = function(a) {
        console.log("myFunction is being called!");
        originalFunction(a);
    }

    var originalFunction = run;
    window.myFunction = function(a, b, c) {
    /* work before the function is called */
    try {
        var returnValue = originalFunction.call(this, a, b, c);
        /* work after the function is called */
        return returnValue;
    }
    catch (e) {
        /* work in case there is an error */
        throw 'er: ' + e;
    }
    }
  </script> -->
</head>

<body></body>

</html>
